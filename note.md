# Rust å­¦ä¹ ç¬”è®°

---

## ç›®å½•

[**å‰è¨€**](#0-å‰è¨€)</br>
[**å˜é‡ä¸å¸¸è§æ•°æ®ç±»å‹**](#1-å˜é‡ä¸å¸¸è§æ•°æ®ç±»å‹)

- [1.1 Rust çš„å˜é‡é»˜è®¤ä¸å¯å˜](#11-rust-çš„å˜é‡é»˜è®¤ä¸å¯å˜)
  - [1.1.1 ä½¿ç”¨ `mut` å…³é”®å­—ä½¿å˜é‡å˜å¾—å¯å˜](#111-ä½¿ç”¨-mut-å…³é”®å­—ä½¿å˜é‡å˜å¾—å¯å˜)
  - [1.1.2 é®è”½(Shadow)](#112-é®è”½shadow)
- [1.2 å¸¸é‡(const)ä¸é™æ€å˜é‡(static)](#12-å¸¸é‡constä¸é™æ€å˜é‡static)
  - [1.2.1 å¸¸é‡(const)](#121-å¸¸é‡const)
  - [1.2.2 é™æ€å˜é‡(static)](#122-é™æ€å˜é‡static)
- [1.3 æ•°æ®ç±»å‹](#13-æ•°æ®ç±»å‹)
  - [1.3.1 æ•´æ•°ç±»å‹(æ•´å‹)](#131-æ•´æ•°ç±»å‹æ•´å‹)
  - [1.3.2 æµ®ç‚¹æ•°ç±»å‹(æµ®ç‚¹å‹)](#132-æµ®ç‚¹æ•°ç±»å‹æµ®ç‚¹å‹)
  - [1.3.3 å¸ƒå°”ç±»å‹(bool)](#133-å¸ƒå°”ç±»å‹bool)
  - [1.3.4 å­—ç¬¦ç±»å‹(char)](#134-å­—ç¬¦ç±»å‹char)
  - [1.3.5 æ•°å€¼è¿ç®—](#135-æ•°å€¼è¿ç®—)
- [1.4 å¤åˆç±»å‹](#14-å¤åˆç±»å‹)
  - [1.4.1 æ•°ç»„(Array)](#141-æ•°ç»„array)
  - [1.4.2 å…ƒç»„(Tuple)](#142-å…ƒç»„tuple)
---
[**æ‰€æœ‰æƒä¸ `String` ç±»å‹**](#2-æ‰€æœ‰æƒä¸-string-ç±»å‹)
- [2.1 æ‰€æœ‰æƒ](#21-æ‰€æœ‰æƒ)
  - [2.1.1 String ç±»å‹](#211-string-ç±»å‹)
  - [2.1.2 æ•°æ®çš„ç§»åŠ¨(Move)](#212-æ•°æ®çš„ç§»åŠ¨move)
  - [2.1.3 å…‹éš†(Cloning)](#213-å…‹éš†cloning)
  - [2.1.4 æ‹·è´](#214-æ‹·è´)
  - [2.1.5 æ‰€æœ‰æƒåœ¨å‡½æ•°åŠè¿”å›å€¼ä¸­çš„ä½œç”¨](#215-æ‰€æœ‰æƒåœ¨å‡½æ•°åŠè¿”å›å€¼ä¸­çš„ä½œç”¨)
- [2.2 å¼•ç”¨ä¸å€Ÿç”¨](#22-å¼•ç”¨ä¸å€Ÿç”¨)
  - [2.2.1 å¯å˜å¼•ç”¨](#221-å¯å˜å¼•ç”¨)
  - [2.2.2 æ‚¬å‚å¼•ç”¨](#222-æ‚¬å‚å¼•ç”¨dangling-reference)
- [2.3 Slice](#23-slice)
  - [2.3.1 å­—ç¬¦ä¸²Slice](#231-å­—ç¬¦ä¸²-slice)
  - [2.3.2 æ•°ç»„Slice](#232-æ•°ç»„-slice)
---
[**ç»“æ„ä½“ä¸æšä¸¾**](#3-ç»“æ„ä½“ä¸æšä¸¾)
- [3.1 ç»“æ„ä½“](#31-ç»“æ„ä½“struct)
  - [3.1.1 å®šä¹‰ç»“æ„ä½“å¹¶å®ä¾‹åŒ–](#311-å®šä¹‰ç»“æ„ä½“å¹¶å®ä¾‹åŒ–)
  - [3.1.2 ç»“æ„ä½“æ›´æ–°è¯­æ³•](#312-ç»“æ„ä½“æ›´æ–°è¯­æ³•)
  - [3.1.3 å…ƒç»„ç»“æ„ä½“](#313-å…ƒç»„ç»“æ„ä½“)
  - [3.1.4 ç±»å•å…ƒç»“æ„ä½“](#314-ç±»å•å…ƒç»“æ„ä½“)
  - [3.1.5 ç»“æ„ä½“çš„åº”ç”¨](#315-ç»“æ„ä½“çš„åº”ç”¨)
  
---


## 0 å‰è¨€
åœ¨ Rust ä¸­, ä½¿ç”¨ `//` è¿›è¡Œå•è¡Œæ³¨é‡Š, ä½¿ç”¨ `/*...*/` è¿›è¡Œå¤šè¡Œæ³¨é‡Š.
å…¶ä¸­ `//` å°†æ³¨é‡Šåˆ°è¡Œå°¾, è€Œ `/*...*/` åˆ™ä» `/*` å¼€å§‹åˆ° `*/` ç»“æŸ, å¯ä»¥è·¨è¶Šå¤šè¡Œ.

> [Rust å®˜æ–¹ç½‘ç«™](https://www.rust-lang.org/) </br>
> [Rust å¼€å‘ç¯å¢ƒæ­å»º](https://www.rust-lang.org/tools/install) </br>
> [Rust å®˜æ–¹æ–‡æ¡£](https://doc.rust-lang.org/book/) |
> [Rust æ–‡æ¡£ä¸­æ–‡è¯‘æœ¬](https://kaisery.github.io/trpl-zh-cn/) </br>
> [Rust åœ¨çº¿ç»ƒä¹ ](https://play.rust-lang.org/) </br>
> [Rust è¯­è¨€å‚è€ƒ](https://doc.rust-lang.org/reference/) </br>
> [é€šè¿‡ä¾‹å­å­¦ä¹  Rust (Rust By Example)](https://doc.rust-lang.org/rust-by-example/)</br>
> [Rust å°ç»ƒä¹ (Rustlings)](https://github.com/rust-lang/rustlings) </br>
> [Rust è¯­è¨€æ ‡å‡†åº“](https://doc.rust-lang.org/std/) </br>
> [Rust ä¸­æ–‡ Wiki](https://rustwiki.org/) </br>
> Rust åœ¨[å“”å“©å“”å“©](https://www.bilibili.com/)ä¸Šä¹Ÿæœ‰è§†é¢‘æ•™ç¨‹,
> æ¨è[æ­¤è§†é¢‘](https://www.bilibili.com/video/BV1m1sreSEoh/)æˆ–[æ­¤è§†é¢‘](https://www.bilibili.com/video/BV15y421h7j7/)

---

## 1 å˜é‡ä¸å¸¸è§æ•°æ®ç±»å‹

1. åœ¨ Rust ä¸­, ä½¿ç”¨ `let` å…³é”®å­—å£°æ˜å˜é‡.
2. Rust æ”¯æŒç±»å‹æ¨å¯¼, ä½†ä¹Ÿå¯ä»¥æ˜¾å¼æŒ‡å®šå˜é‡ç±»å‹: `let x: i32 = 5; //æ˜¾å¼æŒ‡å®š x çš„ç±»å‹ä¸º i32.`
3. å˜é‡å‘½åä½¿ç”¨è›‡å½¢å‘½åæ³•, è€Œæšä¸¾ä¸ç»“æ„æä½¿ç”¨å¸•æ–¯å¡å‘½åæ³•; è‹¥å˜é‡æ²¡æœ‰ä½¿ç”¨åˆ™å‰ç½®ä¸‹åˆ’çº¿ä»¥æ¶ˆé™¤è­¦å‘Š.
4. å¼ºåˆ¶ç±»å‹è½¬æ¢(Casting a value to a different type):
   `let a = 3.1; let b = a as i32;`
5. æ‰“å°å˜é‡:
   ```rust
   println!("val: {}", x);
   println!("val: {x}");
   ```

### 1.1 Rust çš„å˜é‡é»˜è®¤ä¸å¯å˜

ä¸å¯å˜æ€§æ˜¯ Rust å®ç°å…¶å¯é æ€§ä¸å®‰å…¨æ€§ç›®æ ‡çš„å…³é”®.

#### 1.1.1 ä½¿ç”¨ `mut` å…³é”®å­—ä½¿å˜é‡å˜å¾—å¯å˜

```rust
fn main() {
    let mut y = 5; //å¯å˜å˜é‡   
    y = 20; //åˆæ³•ä¿®æ”¹
}
```

#### 1.1.2 é®è”½(Shadow)

Rust å…è®¸éšè—ä¸€ä¸ªå˜é‡, è¿™æ„å‘³ç€å¯ä»¥å£°æ˜ä¸€ä¸ªä¸ç°æœ‰å˜é‡åŒåçš„æ–°å˜é‡,
å¹¶éšè—å‰ä¸€ä¸ªå˜é‡.

- å¯ä»¥æ”¹å˜å€¼
- å¯ä»¥æ”¹å˜ç±»å‹
- å¯ä»¥æ”¹å˜å¯å˜æ€§

```rust
fn variable() {
    //ä¸å¯å˜ä¸å‘½å
    let count_a = 15; //è‡ªåŠ¨æ¨å¯¼å˜é‡ç±»å‹ä¸º i32
    let count_b: i16 = 15; //æ˜¾å¼æŒ‡å®šå˜é‡ç±»å‹ä¸º i16
    /*count_a = 2;*/ //å°è¯•æ”¹å˜ä¸å¯å˜å˜é‡çš„å€¼,ä¼šæŠ¥é”™
    let mut count_c: i32 = 2147483647; //å£°æ˜å¯å˜
    count_c = -2147483648;
    //é®è”½(Shadow)
    let x = 1;
    {
        let x: bool = false; //è¦†ç›–x(æ•°å€¼ï¼‰
        {
            let x = "Shadowing"; //é®è”½x(å¸ƒå°”å€¼)
            println!("{}", x); //æ‰“å°ä»¥éªŒè¯
        } //x(å­—ç¬¦ä¸²)ä½œç”¨åŸŸç»“æŸ(é‡Šæ”¾)
        println!("{}", x); //æ‰“å°ä»¥éªŒè¯
    } //x(å¸ƒå°”å€¼)ä½œç”¨åŸŸç»“æŸ(é‡Šæ”¾)
    println!("{}", x); //æ‰“å°ä»¥éªŒè¯
    let mut y = 4;
}
```

### 1.2 å¸¸é‡(const)ä¸é™æ€å˜é‡(static)

#### 1.2.1 å¸¸é‡(const)

- å¸¸é‡ä½¿ç”¨ `const` å…³é”®å­—å£°æ˜, å¿…é¡»æŒ‡å®šç±»å‹å’Œå€¼.
- å¸¸é‡çš„å€¼ç›´æ¥åµŒåˆ°åº•å±‚ä»£ç ä¸­, è€Œä¸æ˜¯ç®€å•çš„å­—ç¬¦æ›¿æ¢.
- å¸¸é‡åå¿…é¡»å…¨éƒ¨å¤§å†™, ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”å•è¯.
- å¸¸é‡çš„å£°æ˜åªåœ¨ä½œç”¨åŸŸå†…æœ‰æ•ˆ.

#### 1.2.2 é™æ€å˜é‡(static)

- ä¸å¸¸é‡(const)ä¸åŒ, é™æ€å˜é‡å®åœ¨è¿è¡Œæ—¶åˆ†é…å†…å­˜çš„.
- å¹¶éä¸å¯å˜, å¯ä»¥ä½¿ç”¨ `unsafe` å…³é”®å­—ä¿®æ”¹é™æ€å˜é‡(å‰ææ˜¯ä½¿ç”¨ `mut` å£°æ˜å…¶å¯å˜).
- é™æ€å˜é‡çš„ç”Ÿå‘½å‘¨æœŸæ•´ä¸ªç¨‹åºçš„è¿è¡Œæ—¶é—´.

#### ç¤ºä¾‹

```rust
static DAY_IN_SOLAR_YEAR_APPROXIMATE: f64 = 365.2422; //é™æ€å˜é‡
static  mut DAY_IN_YAER: u16 = 365; //å¯å˜é™æ€å˜é‡

fn c2_const_and_static() {
    const SECONDS_IN_WEEK: u32 = 60 * 60 * 24; //ä½¿ç”¨`const`å…³é”®å­—å£°æ˜å¸¸é‡
    /* SECONDS_IN_WEEK = 5; */ //å°è¯•æ”¹å˜å¸¸é‡çš„å€¼,ä¼šæŠ¥é”™
    const SECONDS_IN_DAY: u32 = 86_400; //å¸¸é‡(å¦ä¸€ç§å†™æ³•)
    {
        const A: u8 = 255;
    }
    /*println!("{A}");*/ //å°è¯•æ‰“å°ä¸åœ¨ä½œç”¨åŸŸå†…çš„å¸¸é‡A,ä¼šæŠ¥é”™
    const SECONDS_IN_SOLAR_YEAR: u64 = 60 * 60 * 24 * 365 + 60 * 60 * 5 + 60 * 48 + 46;

    /*unsafe {
        DAY_IN_YAER = 366;
        println!("{DAY_IN_YAER}"); //æ‰“å°å¯å˜é™æ€å˜é‡
    }*/ //ä½¿ç”¨`unsafe`ä¿®æ”¹å¯å˜é™æ€å˜é‡

    println!("One week has {SECONDS_IN_WEEK} seconds |\
    One day has {SECONDS_IN_DAY} seconds |\
    One solar year has {SECONDS_IN_SOLAR_YEAR} seconds");

    println!("One solar year has {DAY_IN_SOLAR_YEAR_APPROXIMATE} days");
}
```

### 1.3 æ•°æ®ç±»å‹

#### 1.3.1 æ•´æ•°ç±»å‹(æ•´å‹)

1. æ•´æ•°ç±»å‹æœ‰ç¬¦å·ä¸æ— ç¬¦å·ä¸¤ç§, åˆ†åˆ«ä½¿ç”¨ `i` å’Œ `u` å‰ç¼€.
    - æœ‰ç¬¦å·æ•´æ•°: `i8`, `i16`, `i32`, `i64`, `i128`, `isize`
    - æ— ç¬¦å·æ•´æ•°: `u8`, `u16`, `u32`, `u64`, `u128`, `usize`
2. æœ‰ç¬¦å·æ•´æ•°ä¸æ”¯æŒè´Ÿæ•°, æ— ç¬¦å·æ•´æ•°æ”¯æŒè´Ÿæ•°.
    - å¯¹äºæœ‰ç¬¦å·æ•´æ•° `i<x>`, å…¶æ”¯æŒèŒƒå›´ä¸º$[-2^{x-1}, 2^{x-1}-1]$.
    - å¯¹äºæ— ç¬¦å·æ•´æ•° `u<x>`, å…¶æ”¯æŒèŒƒå›´ä¸º$[0, 2^{x}-1]$.
3. æ•´æ•°ç±»å‹é»˜è®¤ä¸º `i32`.
4. æ•´æ•°ç±»å‹çš„å¤§å°ä¸å¹³å°æ— å…³, ä½† `isize` ä¸ `usize` çš„å¤§å°ä¸å¹³å°ç›¸å…³.

__è¡¨1.1 ä¸åŒæ•´æ•°ç±»å‹æ”¯æŒçš„èŒƒå›´__


|  ç±»å‹  | èŒƒå›´                    |             è¯´æ˜             |
| :----: | :---------------------- | :--------------------------: |
|  `i8`  | $[-2^7, 2^7-1]$         |   8 ä½æœ‰ç¬¦å·æ•´æ•°, æ”¯æŒè´Ÿæ•°   |
| `i16` | $[-2^{15}, 2^{15}-1]$   |  16 ä½æœ‰ç¬¦å·æ•´æ•°, æ”¯æŒè´Ÿæ•°  |
| `i32` | $[-2^{31}, 2^{31}-1]$   |  32 ä½æœ‰ç¬¦å·æ•´æ•°, æ”¯æŒè´Ÿæ•°  |
| `i64` | $[-2^{63}, 2^{63}-1]$   |  64 ä½æœ‰ç¬¦å·æ•´æ•°, æ”¯æŒè´Ÿæ•°  |
| `i128` | $[-2^{127}, 2^{127}-1]$ |  128 ä½æœ‰ç¬¦å·æ•´æ•°, æ”¯æŒè´Ÿæ•°  |
|  `u8`  | $[0, 2^8-1]$            |  8 ä½æ— ç¬¦å·æ•´æ•°, ä¸æ”¯æŒè´Ÿæ•°  |
| `u16` | $[0, 2^{16}-1]$         | 16 ä½æ— ç¬¦å·æ•´æ•°, ä¸æ”¯æŒè´Ÿæ•° |
| `u32` | $[0, 2^{32}-1]$         | 32 ä½æ— ç¬¦å·æ•´æ•°, ä¸æ”¯æŒè´Ÿæ•° |
| `u64` | $[0, 2^{64}-1]$         | 64 ä½æ— ç¬¦å·æ•´æ•°, ä¸æ”¯æŒè´Ÿæ•° |
| `u128` | $[0, 2^{128}-1]$        | 128 ä½æ— ç¬¦å·æ•´æ•°, ä¸æ”¯æŒè´Ÿæ•° |

- å¯ä»¥ä½¿ç”¨ä»»ä½•ä¸€ç§å½¢å¼ç¼–å†™æ•°å­—å­—é¢å€¼ï¼ŒåŒæ—¶ä¹Ÿå…è®¸ä½¿ç”¨`_`åšä¸ºåˆ†éš”ç¬¦ä»¥æ–¹ä¾¿è¯»æ•°ï¼Œä¾‹å¦‚`1_000`ï¼Œ
  å®ƒçš„å€¼ä¸ä½ æŒ‡å®šçš„ 1000 ç›¸åŒã€‚

__è¡¨1.2 æ•´æ•°ç±»å‹çš„å­—é¢å€¼__


|  å­—é¢å€¼  |     ç¤ºä¾‹     | å®é™…æ•°å€¼ |
| :------: | :-----------: | :------: |
|  åè¿›åˆ¶  |    `1_000`    |   1000   |
| åå…­è¿›åˆ¶ |    `0xE3`    |   227   |
|  å…«è¿›åˆ¶  |    `0o77`    |    63    |
|  äºŒè¿›åˆ¶  | `0b1111_0000` |   240   |

> _æ•´æ•°æº¢å‡º_ </br>
> æ•´æ•°æº¢å‡ºæ˜¯æŒ‡åœ¨è®¡ç®—ä¸­ï¼Œç»“æœè¶…å‡ºäº†æ•´æ•°ç±»å‹çš„è¡¨ç¤ºèŒƒå›´.
> ä¾‹å¦‚: åœ¨ä½¿ç”¨ `u8` ç±»å‹æ—¶, è®¡ç®— `255 + 1` ä¼šå¯¼è‡´æº¢å‡º.</br>
> åœ¨ Rust ä¸­, æ•´æ•°æº¢å‡ºä¼šå¯¼è‡´ç¨‹åº _panic_, è¿™æ˜¯ä¸€ç§è¿è¡Œæ—¶é”™è¯¯.
> ä½¿ç”¨ `--release` flag åœ¨ release æ¨¡å¼ä¸­æ„å»ºæ—¶ï¼Œ
> Rust ä¸ä¼šæ£€æµ‹ä¼šå¯¼è‡´ panic çš„æ•´å‹æº¢å‡º.
> ç›¸åå‘ç”Ÿæ•´å‹æº¢å‡ºæ—¶ï¼ŒRust ä¼šè¿›è¡Œä¸€ç§è¢«ç§°ä¸ºäºŒè¿›åˆ¶è¡¥ç  wrapping çš„æ“ä½œã€‚
> ç®€è€Œè¨€ä¹‹ï¼Œæ¯”æ­¤ç±»å‹èƒ½å®¹çº³æœ€å¤§å€¼è¿˜å¤§çš„å€¼ä¼šå›ç»•åˆ°æœ€å°å€¼,
> å€¼ 256 å˜æˆ 0ï¼Œå€¼ 257 å˜æˆ 1ï¼Œä¾æ­¤ç±»æ¨. ç¨‹åºä¸ä¼š panic
> ä¸è¿‡å˜é‡å¯èƒ½ä¹Ÿä¸ä¼šæ˜¯ä½ æ‰€æœŸæœ›çš„å€¼.ä¾èµ–æ•´å‹æº¢å‡º wrapping çš„è¡Œä¸ºè¢«è®¤ä¸ºæ˜¯ä¸€ç§é”™è¯¯ã€‚
> ä¸ºäº†æ˜¾å¼åœ°å¤„ç†æº¢å‡ºçš„å¯èƒ½æ€§ï¼Œå¯ä»¥ä½¿ç”¨è¿™å‡ ç±»æ ‡å‡†åº“æä¾›çš„åŸå§‹æ•°å­—ç±»å‹æ–¹æ³•ï¼š
>
> - æ‰€æœ‰æ¨¡å¼ä¸‹éƒ½å¯ä»¥ä½¿ç”¨ wrapping_* æ–¹æ³•è¿›è¡Œ wrappingï¼Œå¦‚ wrapping_add
> - å¦‚æœ checked_* æ–¹æ³•å‡ºç°æº¢å‡ºï¼Œåˆ™è¿”å› Noneå€¼
> - ç”¨ overflowing_* æ–¹æ³•è¿”å›å€¼å’Œä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦å‡ºç°æº¢å‡º
> - ç”¨ saturating_* æ–¹æ³•åœ¨å€¼çš„æœ€å°å€¼æˆ–æœ€å¤§å€¼å¤„è¿›è¡Œé¥±å’Œå¤„ç†

#### 1.3.2 æµ®ç‚¹æ•°ç±»å‹(æµ®ç‚¹å‹)

Rust æ”¯æŒä¸¤ç§æµ®ç‚¹æ•°ç±»å‹: `f32` ä¸ `f64`, é»˜è®¤ä¸º `f64`, `f64` çš„ç²¾åº¦æ›´é«˜.

#### 1.3.3 å¸ƒå°”ç±»å‹(bool)

å¸ƒå°”ç±»å‹åªæœ‰ä¸¤ä¸ªå€¼: `true` ä¸ `false`, å…¶å­—é¢å€¼ä¸º `true` ä¸ `false`. é€šå¸¸åœ¨`if` è¯­å¥ä¸­ä½¿ç”¨.

#### 1.3.4 å­—ç¬¦ç±»å‹(char)

Rust çš„å­—ç¬¦ç±»å‹æ˜¯ `char`, å®ƒè¡¨ç¤ºå•ä¸ª Unicode å­—ç¬¦, è€Œä¸æ˜¯å•ä¸ªå­—èŠ‚. `char` ç±»å‹çš„å¤§å°ä¸º 4 å­—èŠ‚,


```rust
//ç¤ºä¾‹: æ•°æ®ç±»å‹
fn data_type() {
    let a = 5; //æ•´æ•°, é»˜è®¤i32
    let b: i32 = -5; //æ•´æ•°, æ˜¾å¼æŒ‡å®šç±»å‹ä¸ºi32
    let c: u32 = 5; //æ•´æ•°, æ˜¾å¼æŒ‡å®šç±»å‹ä¸ºu32, ä»…æ”¯æŒè‡ªç„¶æ•°
    let d = 1.14; //æµ®ç‚¹æ•°, é»˜è®¤f64
    let e: f32 = 3.14; //æµ®ç‚¹æ•°, æ˜¾å¼æŒ‡å®šç±»å‹ä¸ºf32
    let t = true; //å¸ƒå°”å€¼
    let f: bool = false; //å¸ƒå°”å€¼
    let character = 'ğŸ˜…'; //å­—ç¬¦ç±»å‹, 4å­—èŠ‚
}
```
---

#### 1.3.5 æ•°å€¼è¿ç®—

Rust ä¸­çš„æ‰€æœ‰æ•°å­—ç±»å‹éƒ½æ”¯æŒåŸºæœ¬æ•°å­¦è¿ç®—ï¼šåŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•ã€é™¤æ³•å’Œå–ä½™. æ•´æ•°é™¤æ³•ä¼š
å‘é›¶èˆå…¥åˆ°æœ€æ¥è¿‘çš„æ•´æ•°.

```rust
fn calculate() {
    let a: i32 = 5;
    let b: u64 = 455432378;
    let c: f64 = 3.14;
    let d: f32 = 2.5;
    let e: i32 = 10;
    let f: i32 = 17;
    let add = a + b; //åŠ æ³•
    let sub = b - d; //å‡æ³•
    let mul = d * c; //ä¹˜æ³•
    let div = e / a; //é™¤æ³•
    let rem = e % a; //å–ä½™(èƒ½æ•´é™¤, ç»“æœä¸º0)
    let rems = f % a; //å–ä½™(ä¸èƒ½æ•´é™¤ï¼‰
}
```

### 1.4 å¤åˆç±»å‹

å¤åˆç±»å‹(Compound types)å¯ä»¥å°†å¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªç±»å‹. å¤åˆç±»å‹æœ‰ä¸¤ç§: å…ƒç»„(tuple)ä¸æ•°ç»„(array).

- å…ƒç»„å¯ä»¥åŒ…å«ä¸åŒç±»å‹çš„æ•°æ®, è€Œæ•°ç»„åªèƒ½åŒ…å«ç›¸åŒç±»å‹çš„æ•°æ®.
- å…ƒç»„å’Œæ•°ç»„çš„å¤§å°éƒ½æ˜¯å›ºå®šçš„, ä¸èƒ½åŠ¨æ€æ”¹å˜.

#### 1.4.1 æ•°ç»„(Array)

- æ•°ç»„çš„å¤§å°æ˜¯å›ºå®šçš„, åªèƒ½ç”±ç›¸åŒçš„æ•°æ®æ„æˆ.
- å¯¹äºä¸ä¼šæ”¹å˜å…ƒç´ ä¸ªæ•°çš„æƒ…å†µ, æ›´é€‚åˆä½¿ç”¨æ•°ç»„.

##### å®šä¹‰ä¸€ä¸ªæ•°ç»„

æ•°ç»„çš„å…ƒç´ å†™åœ¨æ–¹æ‹¬å·å†…, ç”¨é€—å·åˆ†éš”:
`[1, 2, 3, 4]`, ä¹Ÿå¯ä»¥æ˜¾å¼æŒ‡å®šæ•°ç»„çš„ç±»å‹ä¸æ•°é‡: `[i32; 4]`.

##### è®¿é—®æ•°ç»„å…ƒç´ 

å¯¹äºä»»æ„æ•°ç»„ `<array>`, å¯ä»¥ä½¿ç”¨ä¸‹æ ‡è®¿é—®å…ƒç´ , ä¸‹æ ‡ä» 0 å¼€å§‹:
`<array>.[<index>]`, å…¶ä¸­ `<index>` æ˜¯ä¸‹æ ‡, å³è¦è®¿é—®æ•°ç»„å…ƒç´ çš„ç¬¬å‡ ä½(ä»0å¼€å§‹).
ä¾‹å¦‚: `a.[1]` ä¼šå¾—åˆ°æ•°ç»„`a`çš„ç¬¬äºŒä¸ªå…ƒç´ .

##### è·å–æ•°ç»„é•¿åº¦

å¯¹äºä»»æ„æ•°ç»„ `<array>`, å¯ä»¥ä½¿ç”¨ `len()` æ–¹æ³•è·å–æ•°ç»„çš„é•¿åº¦:
`<array>.len()`, ä¾‹å¦‚: `a.len()` ä¼šå¾—åˆ°æ•°ç»„`a`çš„é•¿åº¦.

```rust
// ç¤ºä¾‹: æ•°ç»„
fn array() {
    let a = [1, 2, 3, 4, 5]; //å£°æ˜æ•°ç»„, ä½¿ç”¨çš„æ˜¯æœ€åŸºæœ¬çš„æ–¹æ³•
    let b: [i32/*æŒ‡å®šç±»å‹ä¸ºi32*/; 6 /*æŒ‡å®šæ•°ç»„çš„é•¿åº¦ä¸º6*/] = [0, 2, 4, 6, 8, 10];
    let months = ["January", "February", "March", "April", "May", "June", "July",
        "August", "September", "November", "October", "December"];
    let a_first = a[0]; //è®¿é—®æ•°ç»„açš„ç¬¬ä¸€ä¸ªå…ƒç´ 
    let b_second = b[1]; //è®¿é—®æ•°ç»„bçš„ç¬¬äºŒä¸ªå…ƒç´ 
    let length = months.len(); //è·å–æ•°ç»„monthsçš„é•¿åº¦
}
```
---

#### 1.4.2 å…ƒç»„(Tuple)

å…ƒç»„ç±»ä¼¼äºæ•°ç»„, é•¿åº¦å›ºå®š, ä½†å¯ä»¥åŒ…å«ä¸åŒç±»å‹çš„æ•°æ®.
å…ƒç»„çš„æ•°æ®ç”¨åœ†æ‹¬å·åŒ…å›´, ç”¨é€—å·åˆ†éš”:
`(1, 2, 3)`, ä¹Ÿå¯ä»¥æ˜¾å¼æŒ‡å®šå…ƒç»„çš„ç±»å‹ä¸æ•°é‡: `(i32, i32, i32)`.
æ²¡æœ‰ä»»ä½•æ•°æ®çš„å…ƒç»„ç§°ä½œå•å…ƒå…ƒç»„, å†™ä½œ`()`, è¡¨ç¤ºç©ºå€¼æˆ–ç©ºçš„è¿”å›ç±»å‹.
å¦‚æœè¡¨è¾¾å¼ä¸è¿”å›ä»»ä½•å…¶ä»–å€¼, åˆ™ä¼šéšå¼è¿”å›å•å…ƒå€¼.

##### è®¿é—®å…ƒç»„å…ƒç´ 

å¯¹äºä»»æ„å…ƒç»„ `<tuple>`, å¯ä»¥ä½¿ç”¨ä¸‹æ ‡è®¿é—®å…ƒç´ , ä¸‹æ ‡ä» 0 å¼€å§‹:
`<tuple>.<index>`, å…¶ä¸­ `<index>` æ˜¯ä¸‹æ ‡, å³è¦è®¿é—®å…ƒç»„å…ƒç´ çš„ç¬¬å‡ ä½(ä»0å¼€å§‹).

```rust
// ç¤ºä¾‹: å…ƒç»„
fn tuple() {
    let a = (1, 2, 3); //å£°æ˜å…ƒç»„
    let b: (u8, i32, f64) = (7 ,-9, 33.2676); //å£°æ˜å…ƒç»„, æ˜¾å¼æŒ‡å®šç±»å‹
    let c = (1, 2.0, "Hello"); //å£°æ˜å…ƒç»„, ä¸åŒç±»å‹
    let a_first = a.0; //è®¿é—®å…ƒç»„açš„ç¬¬ä¸€ä¸ªå…ƒç´ 
    let b_second = b.1; //è®¿é—®å…ƒç»„bçš„ç¬¬äºŒä¸ªå…ƒç´ 
    let c_third = c.2; //è®¿é—®å…ƒç»„cçš„ç¬¬ä¸‰ä¸ªå…ƒç´ 
}
```
---
> å¯¹äºé•¿åº¦å¯å˜çš„å¤šç§æ•°æ®, åº”å½“ä½¿ç”¨Vector.(è§åæ–‡)
---

## 2 æ‰€æœ‰æƒä¸ `String` ç±»å‹

### 2.1 æ‰€æœ‰æƒ

> 1. å¯¹äº C/C++ ç­‰è¯­è¨€, å†…å­˜ç®¡ç†ç”±ç¨‹åºå‘˜æ‰‹åŠ¨æ§åˆ¶.
> 2. è€Œ Pythonã€Java ç­‰è¯­è¨€, å†…å­˜ç®¡ç†ç”±åƒåœ¾å›æ”¶å™¨(Garbage Collector)è‡ªåŠ¨æ§åˆ¶.
> 3. Rust é‡‡ç”¨äº†æ‰€æœ‰æƒ(Ownership)æœºåˆ¶, ä½¿å¾—å†…å­˜ç®¡ç†æ›´é«˜æ•ˆä¸”å®‰å…¨.

---

> **C/C++çš„å†…å­˜é”™è¯¯**
> - å†…å­˜æ³„æ¼(Memory Leak): ç¨‹åºåˆ†é…äº†å†…å­˜ä½†æ²¡æœ‰é‡Šæ”¾, å¯¼è‡´å†…å­˜æ— æ³•ä½¿ç”¨.
    >  ```
>  int* ptr = new int[10]; //åˆ†é…å†…å­˜
>  //å¿˜è®°é‡Šæ”¾å†…å­˜
>  //delete ptr;
>  ```
> - æ‚¬å‚æŒ‡é’ˆ(Dangling Pointer): æŒ‡å‘å·²é‡Šæ”¾å†…å­˜çš„æŒ‡é’ˆ, è®¿é—®æ—¶ä¼šå¯¼è‡´é”™è¯¯.
    >  ```
>  int* ptr = new int[10]; //åˆ†é…å†…å­˜
>  delete ptr; //é‡Šæ”¾å†…å­˜
>  //ptr ä»ç„¶æŒ‡å‘å·²é‡Šæ”¾å†…å­˜, å³æ‚¬å‚æŒ‡é’ˆ
>  ```
> - é‡å¤é‡Šæ”¾: å¤šæ¬¡é‡Šæ”¾åŒä¸€å—å†…å­˜, å¯¼è‡´é”™è¯¯.
    >  ```
>  int* ptr = new int[10]; //åˆ†é…å†…å­˜
>  delete ptr; //é‡Šæ”¾å†…å­˜
>  delete ptr; //é‡å¤é‡Šæ”¾, å¯¼è‡´é”™è¯¯
>  ```
> - æ•°ç»„è¶Šç•Œ(Array Out of Bounds): è®¿é—®æ•°ç»„è¶Šç•Œçš„å…ƒç´ , å¯¼è‡´é”™è¯¯.
    >    ```
>    int arr[10];
>    arr[10] = 5; //è®¿é—®è¶Šç•Œ, å¯¼è‡´é”™è¯¯
>    ```
> - é‡æŒ‡é’ˆ(Wild Pointer): æŒ‡å‘æœªåˆ†é…å†…å­˜çš„æŒ‡é’ˆ, è®¿é—®æ—¶ä¼šå¯¼è‡´é”™è¯¯.
    >  ```
>  int* ptr; //æœªåˆå§‹åŒ–æŒ‡é’ˆ
>  *ptr = 10; //è®¿é—®æœªåˆ†é…å†…å­˜, å¯¼è‡´é”™è¯¯
>  ```
> - ä½¿ç”¨å·²é‡Šæ”¾çš„å†…å­˜(Use After Free): è®¿é—®å·²é‡Šæ”¾çš„å†…å­˜, å¯¼è‡´é”™è¯¯.
    >  ```
>  int* ptr = new int[10]; //åˆ†é…å†…å­˜
>  delete ptr; //é‡Šæ”¾å†…å­˜
>  *ptr = 10; //è®¿é—®å·²é‡Šæ”¾å†…å­˜, å¯¼è‡´é”™è¯¯
>  ```
---
Rust æœ€é‡è¦çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯**æ‰€æœ‰æƒ(Ownership)**, å®ƒæ˜¯ Rust çš„å†…å­˜ç®¡ç†æœºåˆ¶.
æ‰€æœ‰æƒç³»ç»Ÿä½¿ Rust ç‹¬æ ‘ä¸€å¸œ, ä½¿å…¶åœ¨å†…å­˜å®‰å…¨æ€§å’Œæ€§èƒ½æ–¹é¢éƒ½è¡¨ç°å‡ºè‰².
ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶ä¼šæ ¹æ®ä¸€ç³»åˆ—çš„è§„åˆ™è¿›è¡Œæ£€æŸ¥. å¦‚æœè¿åäº†ä»»ä½•è¿™äº›è§„åˆ™, ç¨‹åºéƒ½ä¸èƒ½ç¼–è¯‘.
åœ¨è¿è¡Œæ—¶, æ‰€æœ‰æƒç³»ç»Ÿçš„ä»»ä½•åŠŸèƒ½éƒ½ä¸ä¼šå‡æ…¢ç¨‹åº.</br>
æ‰€æœ‰æƒç³»ç»Ÿæœ‰ä¸‰å¤§è§„åˆ™:
1. æ¯ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…(Owner).
2. æ¯ä¸ªå€¼åªèƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€….
3. å½“æ‰€æœ‰è€…ç¦»å¼€ä½œç”¨åŸŸæ—¶, å€¼ä¼šè¢«ä¸¢å¼ƒ(Drop).

#### 2.1.1 String ç±»å‹

- Rust ä¸­çš„å­—ç¬¦ä¸²æœ‰ä¸¤ç§ç±»å‹: `String` ä¸ `&str`.</br>

`&str` æ˜¯å­—ç¬¦ä¸²å­—é¢å€¼, æ˜¯ä¸å¯å˜çš„.
ä¸ºæ­¤, Rust æä¾›äº†å¦ä¸€ç§å­—ç¬¦ä¸²ç±»å‹ `String`, å®ƒæ˜¯å¯å˜çš„.
å› ä¸º `String` æ˜¯å¯å˜çš„, æ‰€ä»¥å®ƒåœ¨å †ä¸Šåˆ†é…å†…å­˜.
å¯ä»¥é€šè¿‡ `String::from()` æ–¹æ³•åˆ›å»ºä¸€ä¸ª `String` ç±»å‹çš„å­—ç¬¦ä¸²:
```rust
let s = String::from("Hello, world!");
```
å¯ä»¥é€šè¿‡ `push_str()` æ–¹æ³•å‘ `String` ç±»å‹çš„å­—ç¬¦ä¸²æ·»åŠ å†…å®¹:
```rust
fn string() {
    let mut s = String::from("Hello");
    s.push_str(", world!"); //æ·»åŠ å†…å®¹
    println!("{s}"); //å°†ä¼šæ‰“å° "Hello, world!"
}
```

#### 2.1.2 æ•°æ®çš„ç§»åŠ¨(Move)
è¿™æ˜¯æ™®é€šå˜é‡çš„ä¾‹å­:
```rust
let x = 5;
let y = x;
println!("x: {x}, y: {y}"); //æ‰“å° x å’Œ y
```
å¦‚ä¸Šæ‰€ç¤º, å…ˆç»™`x`èµ‹å€¼`5`, ç„¶åå°†`x`çš„å€¼èµ‹ç»™`y`.
è¿™æ—¶, `x` å’Œ `y` éƒ½æ˜¯ `5`, ä½†å®ƒä»¬æ˜¯ä¸¤ä¸ªä¸åŒçš„å˜é‡, äº’ä¸å½±å“, `x`ä¸`y`éƒ½æ˜¯å¯ç”¨çš„.</br>
ä½†å¯¹äº`String`ç±»å‹æ¥è¯´, æƒ…å†µå°±ä¸åŒäº†:
```rust
//é”™è¯¯æ¼”ç¤º
let s1 = String::from("Hello");
let s2 = s1;
println!("s1: {s1}, s2: {s2}"); //æ‰“å° s1 å’Œ s2
```
ä¸Šé¢çš„ä»£ç ä¼šæŠ¥é”™, å› ä¸º `s1` çš„æ‰€æœ‰æƒå·²ç»è½¬ç§»ç»™äº† `s2`, `s1` ä¸å†æœ‰æ•ˆ.
è¿™å«åš Rust ä¸­çš„**ç§»åŠ¨(Move)**.

#### 2.1.3 å…‹éš†(Cloning)

å¦‚æœæƒ³è¦åŒæ—¶ä¿ç•™åŸæ•°æ®ä¸ç§»åŠ¨åçš„æ•°æ®, å¯ä»¥ä½¿ç”¨ `clone()` æ–¹æ³•.
```rust
fn main() {
    let s1 = String::from("Hello");
    let s2 = s1.clone(); //å…‹éš†
    println!("s1: {s1}, s2: {s2}"); //æ‰“å° s1 å’Œ s2
}
```
ä¸Šé¢çš„ä»£ç å¯ä»¥æ­£å¸¸è¿è¡Œ, å› ä¸º `s1` å’Œ `s2` éƒ½æ˜¯æœ‰æ•ˆçš„.

#### 2.1.4 æ‹·è´

å¯¹äºç®€å•çš„æ•°æ®ç±»å‹, Rust ä¼šè‡ªåŠ¨è¿›è¡Œ**æ‹·è´**, è€Œä¸æ˜¯ç§»åŠ¨.</br>
å¯ä»¥è¿›è¡Œæ‹·è´çš„æ•°æ®ç±»å‹æœ‰:
- æ‰€æœ‰æ•´æ•°ç±»å‹
- æ‰€æœ‰æµ®ç‚¹æ•°ç±»å‹
- å¸ƒå°”ç±»å‹
- å­—ç¬¦ç±»å‹`char`
- å…ƒç»„, å‰ææ˜¯å…¶æ‰€æœ‰å…ƒç´ éƒ½ç¬¦åˆä»¥ä¸Šå¯ä»¥è¿›è¡Œæ‹·è´çš„æ•°æ®ç±»å‹.</br>
  æ¯”å¦‚è¯´`(i32, i32)` å¯ä»¥è¿›è¡Œæ‹·è´, ä½† `(i32, String)` ä¸å¯ä»¥è¿›è¡Œæ‹·è´.

#### 2.1.5 æ‰€æœ‰æƒåœ¨å‡½æ•°åŠè¿”å›å€¼ä¸­çš„ä½œç”¨
##### æ‰€æœ‰æƒä¸å‡½æ•°
```rust
fn main() {
    let s = String::from("hello");
    takes_ownership(s); //sçš„æ‰€æœ‰æƒè½¬ç§»åˆ°å‡½æ•°ä¸­
    //æ­¤æ—¶så¤±æ•ˆ
    let x = 5;
    copy(x); //xçš„å€¼è¢«æ‹·è´åˆ°å‡½æ•°ä¸­
    //æ­¤æ—¶xä»ç„¶æœ‰æ•ˆ
} //æ­¤æ—¶, xä¸séƒ½è¢«é‡Šæ”¾, ä¸è¿‡så·²ç»å¤±æ•ˆäº†.

fn takes_ownership(strings: String) { //sçš„æ‰€æœ‰æƒè½¬ç§»åˆ°å‡½æ•°ä¸­
    println!("s: {strings}");
}

fn copy(var: i32) {
    println!("var: {var}");
}
```
##### æ‰€æœ‰æƒä¸è¿”å›å€¼
```rust
fn main() {
    let s1 = back();
    let s2 = String::from("Hello");
    let s3 = give_and_back(s2); //s2çš„æ‰€æœ‰æƒè½¬ç§»åˆ°å‡½æ•°ä¸­
}

fn back() -> String {
    let a_string = String::from("Hello");
    a_string //è¿”å›å€¼
}

fn give_and_back(next_string: String) -> String {
    next_string
}
```
è¿˜èƒ½é€šè¿‡å…ƒç»„è¿”å›å¤šä¸ªå€¼:
```rust
fn main() {
    let s1 = String::from("Hello");
    let (s, length) = length(s1); //sçš„æ‰€æœ‰æƒè½¬ç§»åˆ°å‡½æ•°ä¸­
}

fn length(s: String) -> (String, usize) {
    let length = s.len();
    (s, length) //è¿”å›å€¼
}
```
---

### 2.2 å¼•ç”¨ä¸å€Ÿç”¨

`&` ç¬¦å·ä»£è¡¨**å¼•ç”¨(Reference)**, å®ƒå…è®¸ä½ ä½¿ç”¨ä¸€ä¸ªå€¼è€Œä¸è·å–æ‰€æœ‰æƒ.
```rust
fn main() {
    let s1 = String::from("Hello");
    let len = calculate_length(&s1/*å¯¹s1è¿›è¡Œå¼•ç”¨*/); //ä¼ é€’å¼•ç”¨
}
fn calculate_length(s: &String) -> usize { //sæ˜¯Stringç±»å‹çš„å¼•ç”¨
    s.len() //è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦
}
```
æ­¤å¤„é€šè¿‡`&s1` ä¼ é€’äº† `s1` çš„å¼•ç”¨, è€Œä¸æ˜¯ `s1` çš„æ‰€æœ‰æƒ.</br>
æ™®é€šå¼•ç”¨å‡½æ•°çš„å€¼æ˜¯ä¸å¯ä»¥è¢«ä¿®æ”¹çš„: 
```rust
fn main() {
    let mut s = String::from("Hello");

    change(&s); //ä¼ é€’ä¸å¯å˜å¼•ç”¨
}
fn change(s: &String) {
    s.push_str(", world!"); //é”™è¯¯, sæ˜¯ä¸å¯å˜å¼•ç”¨
}
```
äºæ˜¯, ä»£ç æŠ¥é”™:
```terminaloutput
error[E0596]: cannot borrow `*s` as mutable, as it is behind a `&` reference
 --> src\main.rs:7:5
  |
7 |     s.push_str(", world!"); //é”™è¯¯, sæ˜¯ä¸å¯å˜å¼•ç”¨
  |     ^ `s` is a `&` reference, so the data it refers to cannot be borrowed as mutable
  |
help: consider changing this to be a mutable reference
  |
6 | fn change(s: &mut String) {
  |               +++
```

#### 2.2.1 å¯å˜å¼•ç”¨

åœ¨ä¸Šæ–‡æˆ‘ä»¬æåˆ°, å¼•ç”¨æ˜¯ä¸å¯å˜çš„, è¦ä½¿å¼•ç”¨å¯å˜, å¯ä»¥ä½¿ç”¨ `&mut` æ¥åˆ›å»ºå¯å˜å¼•ç”¨. 
```rust
fn main() {
    let mut s = String::from("Hello");
    change(&mut s); //ä¼ é€’å¯å˜å¼•ç”¨
}
fn change(s: &mut String) {
    s.push_str(", world!"); //åˆæ³•, sæ˜¯å¯å˜å¼•ç”¨
}
```
##### å¯å˜å¼•ç”¨çš„é™åˆ¶
ä¸è¿‡, å¯å˜å¼•ç”¨åªèƒ½å¤Ÿæœ‰ä¸€ä¸ª, ä¹Ÿå°±æ˜¯è¯´, åœ¨åŒä¸€ä½œç”¨åŸŸå†…, ä¸èƒ½åŒæ—¶å­˜åœ¨å¤šä¸ªå¯å˜å¼•ç”¨.
```rust
fn main() {
    let mut s = String::from("Hello");
    let s1 = &mut s;
    let s2 = &mut s; //é”™è¯¯, s1ä¸s2éƒ½æ˜¯å¯¹sçš„å¼•ç”¨
    println!("{} | {}", s1, s2);
}
```
äºæ˜¯, ä»£ç æŠ¥é”™:
```terminaloutput
error[E0499]: cannot borrow `s` as mutable more than once at a time
 --> src\main.rs:4:14
  |
3 |     let s1 = &mut s;
  |              ------ first mutable borrow occurs here
4 |     let s2 = &mut s; //é”™è¯¯, s1ä¸s2éƒ½æ˜¯å¯¹sçš„å¼•ç”¨
  |              ^^^^^^ second mutable borrow occurs here
5 |     println!("{} | {}", s1, s2);
  |                         -- first borrow later used here
```
- `error[E0499]` å‘Šè¯‰æˆ‘ä»¬, ä¸èƒ½åŒæ—¶è¿›è¡Œè¶…è¿‡ä¸€æ¬¡å¯å˜å¼•ç”¨.
- è¿™æ ·åšé¿å…äº†æ•°æ®ç«äº‰(Data Race), ä¹Ÿå°±æ˜¯ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€æ•°æ®, å¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜.
è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•, åªéœ€è¦æ–°å»ºä¸€ä¸ªä½œç”¨åŸŸå³å¯.
```rust
fn main(){
    let mut s = String::from("Hello");
    {
        let s1 = &mut s; //å¯å˜å¼•ç”¨
        println!("{}", s1);
    } //s1çš„ä½œç”¨åŸŸç»“æŸ, å¯å˜å¼•ç”¨è¢«é‡Šæ”¾
    let s2 = &mut s; //åˆæ³•, å› ä¸ºs1çš„ä½œç”¨åŸŸå·²ç»ç»“æŸ
    println!("{}", s2);
}
```
ä¹Ÿä¸èƒ½åŒæ—¶å­˜åœ¨å¯å˜å¼•ç”¨ä¸ä¸å¯å˜å¼•ç”¨:
```rust
fn main() {
    let mut s = String::from("HELLO");
    let s1 = &s; //ä¸å¯å˜å¼•ç”¨
    let s2 = &mut s; //é”™è¯¯, s1ä¸s2éƒ½æ˜¯å¯¹sçš„å¼•ç”¨
    println!("{} | {}", s1, s2)
}
```
äºæ˜¯, ä»£ç æŠ¥é”™:
```terminaloutput
error[E0502]: cannot borrow `s` as mutable because it is also borrowed as immutable
 --> src\main.rs:4:14
  |
3 |     let s1 = &s; //ä¸å¯å˜å¼•ç”¨
  |              -- immutable borrow occurs here
4 |     let s2 = &mut s; //é”™è¯¯, s1ä¸s2éƒ½æ˜¯å¯¹sçš„å¼•ç”¨
  |              ^^^^^^ mutable borrow occurs here
5 |     println!("{} | {}", s1, s2)
  |                         -- immutable borrow later used here

```
- `error[E0502]` å‘Šè¯‰æˆ‘ä»¬, ä¸èƒ½åŒæ—¶è¿›è¡Œä¸å¯å˜å¼•ç”¨ä¸å¯å˜å¼•ç”¨.
- è¿™ä»ç„¶æ˜¯ä¸ºäº†é¿å…æ•°æ®ç«äº‰çš„é—®é¢˜.

#### 2.2.2 æ‚¬å‚å¼•ç”¨(Dangling Reference)
åœ¨å…·æœ‰æŒ‡é’ˆçš„è¯­è¨€ä¸­, å¾ˆå®¹æ˜“é€šè¿‡é‡Šæ”¾å†…å­˜æ—¶ä¿ç•™æŒ‡å‘å®ƒçš„æŒ‡é’ˆè€Œé”™è¯¯åœ°ç”Ÿæˆä¸€ä¸ª**æ‚¬å‚æŒ‡é’ˆ
(dangling pointer)**, æ‰€è°“æ‚¬å‚æŒ‡é’ˆæ˜¯å…¶æŒ‡å‘çš„å†…å­˜å¯èƒ½å·²ç»è¢«åˆ†é…ç»™å…¶å®ƒæŒæœ‰è€….</br>
åœ¨ Rust ä¸­, ç±»ä¼¼äºæ‚¬å‚æŒ‡é’ˆçš„å¼•ç”¨è¢«ç§°ä¸º**æ‚¬å‚å¼•ç”¨(dangling reference)**.
ä¸ºäº†é¿å…æ‚¬å‚å¼•ç”¨çš„æƒ…å†µå‡ºç°, ç¼–è¯‘å™¨éœ€ç¡®ä¿æ•°æ®ä¸ä¼šåœ¨å…¶å¼•ç”¨ä¹‹å‰ç¦»å¼€ä½œç”¨åŸŸ.
ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ‚¬å‚å¼•ç”¨çš„ä¾‹å­:
```rust
fn main() {
    let reference_to_nothing = dangle();
}
fn dangle() -> &String {
    let s = String::from("hello");
    &s 
}
```
äºæ˜¯, ä»£ç æŠ¥é”™:
```terminaloutput
error[E0106]: missing lifetime specifier
 --> src\main.rs:4:16
  |
4 | fn dangle() -> &String {
  |                ^ expected named lifetime parameter
  |
  = help: this function's return type contains a borrowed value, but there is no value for it to be borrowed from
help: consider using the `'static` lifetime, but this is uncommon unless you're returning a borrowed value from a `const` or a `static`
  |
4 | fn dangle() -> &'static String {
  |                 +++++++
help: instead, you are more likely to want to return an owned value
  |
4 - fn dangle() -> &String {
4 + fn dangle() -> String {
  |
```
- `error[E0106]` å‘Šè¯‰æˆ‘ä»¬, éœ€è¦ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå‚æ•°.
- `help` æç¤ºæˆ‘ä»¬, è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼åŒ…å«ä¸€ä¸ªå€Ÿç”¨çš„å€¼, ä½†æ²¡æœ‰å€¼å¯ä»¥å€Ÿç”¨.

æŠ¥é”™åŸå› æ˜¯å› ä¸º `s` çš„ä½œç”¨åŸŸåœ¨ `dangle()` å‡½æ•°ç»“æŸæ—¶å°±ç»“æŸäº†, è€Œæˆ‘ä»¬ä»ç„¶å°è¯•è¿”å› `s` çš„å¼•ç”¨.
è¿™å°†å¯¼è‡´æ‚¬å‚å¼•ç”¨, å› ä¸º `s` å·²ç»è¢«é‡Šæ”¾äº†.
è§£å†³æ–¹æ³•ä¸ºç›´æ¥è¿”å› `s` çš„å€¼, è€Œä¸æ˜¯å¼•ç”¨:
```rust
fn main() {
    let reference_to_nothing = dangle();
}
fn dangle() -> &String {
    let s = String::from("hello");
    s 
}
```
ä»£ç æ­£å¸¸è¿è¡Œ.

---
æ€»è€Œè¨€ä¹‹, å¼•ç”¨å¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶:
1. åœ¨åŒä¸€æ—¶åˆ»å†…:
   1. **åªèƒ½**æœ‰ä¸€ä¸ªå¯å˜å¼•ç”¨.</br>
      æˆ–</br>
   2. **åªèƒ½**æœ‰å¤šä¸ªä¸å¯å˜å¼•ç”¨.</br>
2. å¼•ç”¨å¿…é¡»å§‹ç»ˆæœ‰æ•ˆ.

### 2.3 Slice

Slice æ˜¯å¯¹æ•°ç»„æˆ–å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†çš„å¼•ç”¨, å®ƒå…è®¸ä½ è®¿é—®æ•°ç»„æˆ–å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†è€Œä¸è·å–æ‰€æœ‰æƒ.
å¯ä»¥é€šè¿‡ `&<String>[<start_index>..<end_index>]` çš„æ–¹å¼åˆ›å»ºä¸€ä¸ª Slice.
å…¶ä¸­ `<String>` æ˜¯éœ€è¦è¿›è¡Œå¼•ç”¨çš„å­—ç¬¦ä¸²æˆ–æ•°ç»„,
`<start_index>` æ˜¯ Slice çš„èµ·å§‹ç´¢å¼•, `<end_index>` æ˜¯ Slice çš„ç»“æŸç´¢å¼•(ä»0å¼€å§‹).

#### 2.3.1 å­—ç¬¦ä¸² Slice

ä¾‹å¦‚, è¦æŠŠ`Hello, world!` ä¸­çš„2ä¸ªå•è¯åˆ†åˆ«æå–å‡ºæ¥, å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç :
```rust
fn main() {
    let s = String::from("Hello, world!");
    let first_word = &s[0..5]; //æå–å‰5ä¸ªå­—ç¬¦
    let second_word = &s[7..12]; //æå–å5ä¸ªå­—ç¬¦
    println!("{slice} | {slice2}");
}
```
ä»¥ä¸‹çš„æ–¹æ³•é€‚ç”¨äºå¯»æ‰¾ä»»æ„å•è¯:
```rust
fn first_word(s: &String) -> &str {
    let bytes = s.as_bytes();
    for (i, &item) in bytes.iter().enumerate() {
        if item == b' ' {
            return &s[0..i]; //è¿”å›ç¬¬ä¸€ä¸ªå•è¯
        }
    }
    &s[..] //è¿”å›æ•´ä¸ªå­—ç¬¦ä¸²
}
```
---

#### 2.3.2 æ•°ç»„ Slice

å®é™…ä¸Š, `slice` è¿˜æ”¯æŒæ•°ç»„. ä¾‹å¦‚:
```rust
let a = [1, 2, 3, 4, 5];
let slice = &a[0..3]; //æå–å‰3ä¸ªå…ƒç´ 
assert_eq!(&[1, 2, 3], slice); //éªŒè¯
```
---


## 3 ç»“æ„ä½“ä¸æšä¸¾

### 3.1 ç»“æ„ä½“(Struct)

ç»“æ„ä½“(Struct)æ˜¯ Rust ä¸­ä¸€ç§è‡ªå®šä¹‰æ•°æ®ç±»å‹, ç”¨äºå°†å¤šä¸ªç›¸å…³çš„æ•°æ®ç»„åˆåœ¨ä¸€èµ·.

#### 3.1.1 å®šä¹‰ç»“æ„ä½“å¹¶å®ä¾‹åŒ–

ç»“æ„ä½“çš„å®šä¹‰ä½¿ç”¨ `struct` å…³é”®å­—, å¹¶æä¾›åå­—.
æ¥ç€, ä½¿ç”¨ `{}` å®šä¹‰æ¯ä¸€éƒ¨åˆ†çš„æ•°æ®åŠç±»å‹, æˆ‘ä»¬ç§°å…¶ä¸ºå­—æ®µ(Field).å…¶æ ¼å¼å¦‚ä¸‹:
```text
struct <StructName> {
    <Name1>: <Type1>,
    <Name2>: <Type2>,
    ...
}
```
å®šä¹‰ç»“æ„ä½“ä¹‹å, éœ€è¦å¯¹ç»“æ„ä½“è¿›è¡Œå®ä¾‹åŒ–.
å¯¹ç»“æ„ä½“è¿›è¡Œå®ä¾‹åŒ–, éœ€è¦ä»¥ç»“æ„ä½“åå­—å¼€å¤´, ç„¶åç”¨ `{}` åŒ…å›´æ¯ä¸€éƒ¨åˆ†çš„æ•°æ®,
å¹¶åœ¨å…¶ä¸­ä»¥ `<key>: <value>` çš„æ ¼å¼å®šä¹‰æ¯ä¸€éƒ¨åˆ†çš„æ•°æ®.å…¶æ ¼å¼å¦‚ä¸‹:
```text
<StructName> {
    <key1>: <value1>,
    <key2>: <value2>,
    ...
}
```
å®šä¹‰å¹¶å®ä¾‹åŒ–ä¸€ä¸ªç»“æ„ä½“çš„ä¾‹å­:
```rust
// ç¤ºä¾‹: ç»“æ„ä½“
struct User {
    username: String,
    userid: u32,
    email: String,
    sign_up_date: String,
    active: bool,
} //å®šä¹‰ç»“æ„ä½“
fn main() {
    let user1 = User {
        username: "UserA".to_string(),
        userid: 1,
        email: "someone@example.com".to_string(),
        sign_up_date: "2023-10-01".to_string(),
        active: true,
    }; //å®ä¾‹åŒ–ç»“æ„ä½“
}
```

è·å–ç»“æ„ä½“å­—æ®µçš„å€¼, éœ€è¦ä½¿ç”¨ `.` ç¬¦å·: `<name>.<field>`,
å…¶ä¸­ `<name>` æ˜¯ç»“æ„ä½“çš„åå­—, `<field>` æ˜¯å­—æ®µçš„åå­—.ä¾‹:
```rust
// ç¤ºä¾‹: ç»“æ„ä½“
struct User {
    username: String,
    userid: u32,
    email: String,
    sign_up_date: String,
    active: bool,
} //å®šä¹‰ç»“æ„ä½“
fn main() {
    let user1 = User {
        username: "UserA".to_string(),
        userid: 1,
        email: "someone@example.com".to_string(),
        sign_up_date: "2023-10-01".to_string(),
        active: true,
    }; //å®ä¾‹åŒ–ç»“æ„ä½“
    user1.userid = 4; //è·å–ç»“æ„ä½“å­—æ®µçš„å€¼
}
```
æˆ‘ä»¬è¿˜å¯ä»¥ç”¨å‡½æ•°æ¥å®ä¾‹åŒ–ç»“æ„ä½“, å¹¶éšå¼è¿”å›å®ä¾‹,ä¾‹å¦‚:
```rust
struct User {
    username: String,
    userid: u32,
    email: String,
    sign_up_date: String,
    active: bool,
} //å®šä¹‰ç»“æ„ä½“
fn set_user(
    name: String,
    id: u32,
    email: String,
    date: String,
)
    -> User {
     User {
        username: name,
        userid: id,
        email: email,
        sign_up_date: date,
        active: true,
     }
}
```
è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å‡½æ•°æ¥å®ä¾‹åŒ–ç»“æ„ä½“äº†.

ä¸è¿‡, æœ‰äº›å˜é‡çš„åç§°ä¸ç»“æ„ä½“å­—æ®µçš„åç§°ç›¸åŒ, è¿™æ—¶å¯ä»¥ä½¿ç”¨ç®€å†™è¯­æ³•æ¥ç®€åŒ–ä»£ç :
```rust
struct TrainTicket {
    passenger_name: String,
    price: f32,
    from: String,
    arrive_station: String,
    date: String,
    train_number: String,
    carriage_number: u8,
    seat_number: String,
    need_hongkong_macau_pass: bool,
}
fn ticket(
    passenger_name: String,
    price: f32,
    from: String,
    arrive_station: String,
    date: String,
    train_number: String,
    carriage_number: u8,
    seat_number: String,
    pass: bool,
) -> TrainTicket {
    TrainTicket {
        passenger_name,
        price,
        from,
        arrive_station,
        date,
        train_number,
        carriage_number,
        seat_number,
        need_hongkong_macau_pass: pass,
    }
}
fn main() {
    let ticket1 = ticket(
        "Li Hua".to_string(),
        100.0,
        "Beijing West Railway Station".to_string(),
        "Hong Kong West Kowlon Station".to_string(),
        "2025-01-01".to_string(),
        "G79".to_string(),
        6,
        "3C".to_string(),
        true,
    ); //å®ä¾‹åŒ–ç»“æ„ä½“
    println!("Passenger: {}", ticket1.passenger_name);
    println!("Price: {}", ticket1.price);
} 
```
è¿™æ ·, å½“å˜é‡åä¸å­—æ®µåé‡å¤çš„æ—¶å€™, æˆ‘ä»¬ä¾¿ä¸éœ€è¦é‡å¤å†™å˜é‡åäº†.

#### 3.1.2 ç»“æ„ä½“æ›´æ–°è¯­æ³•

ç»“æ„ä½“æ›´æ–°è¯­æ³•å…è®¸æˆ‘ä»¬åªä¿®æ”¹ä¸€ä¸ªæ—§çš„ç»“æ„ä½“çš„æŸäº›å­—æ®µ, è€Œä¸éœ€è¦é‡æ–°å®šä¹‰æ‰€æœ‰å­—æ®µ.</br>
è¿™æ˜¯ä¸ä½¿ç”¨ç»“æ„ä½“æ›´æ–°è¯­æ³•çš„ç¤ºä¾‹:
```rust
struct User {
    username: String,
    userid: u32,
    email: String,
    sign_up_date: String,
    active: bool,
}
fn main() {
    let user1 = User {
        username: String::from("User1"),
        userid: 1,
        email: String::from("UserA@example.com"),
        sign_up_date: String::from("2023-10-01"),
        active: true,
    };
    let user2 = User {
        username: user1.username,
        userid: 2,
        email: String::from("another@example.com"),
        sign_up_date: user1.sign_up_date,
        active: user1.active,
    };
}
```
è¿™æ˜¯ä½¿ç”¨äº†ç»“æ„ä½“æ›´æ–°è¯­æ³•çš„ç¤ºä¾‹:
```rust
struct User {
    username: String,
    userid: u32,
    email: String,
    sign_up_date: String,
    active: bool,
}
fn main() {
    let user1 = User {
        username: String::from("User1"),
        userid: 1,
        email: String::from("UserA@example.com"),
        sign_up_date: String::from("2023-10-01"),
        active: true,
    };
    let user2 = User {
        userid: 2,
        email: String::from("another@example.com"),
        ..user1 //ä½¿ç”¨ç»“æ„ä½“æ›´æ–°è¯­æ³•
    };
}
```
å¯ä»¥å‘ç°, ç»“æ„ä½“æ›´æ–°è¯­æ³•èŠ‚çœäº†è®¸å¤šä»£ç . ä¸è¿‡ `..user1` å¿…é¡»æ”¾åœ¨æœ€å.</br>

**<font color='yellow'>éœ€è¦æ³¨æ„</font>**, ç»“æ„ä½“æ›´æ–°è¯­æ³•ç±»ä¼¼äºç§»åŠ¨,
æ•… `user1` ä¸­çš„è¢«ç»“æ„ä½“æ›´æ–°è¯­æ³•ä½¿ç”¨çš„å­—æ®µä¾¿ä¸èƒ½å†ä½¿ç”¨äº†.

#### 3.1.3 å…ƒç»„ç»“æ„ä½“

**å…ƒç»„ç»“æ„ä½“(Tuple Struct)** ç±»ä¼¼äºæ™®é€šç»“æ„ä½“, ä½†æ²¡æœ‰å­—æ®µå, åªæœ‰å­—æ®µç±»å‹.

å®šä¹‰å…ƒç»„ç»“æ„ä½“çš„æ–¹æ³•ä¸å®šä¹‰æ™®é€šç»“æ„ä½“çš„æ–¹æ³•ç±»ä¼¼, åªä¸è¿‡æ²¡æœ‰å­—æ®µå.
```rust
struct Color(u8, u8, u8); //å®šä¹‰å…ƒç»„ç»“æ„ä½“
struct Point(i32, i32, i32); //å®šä¹‰å…ƒç»„ç»“æ„ä½“
fn main() {
    let green = Color(0, 255, 0);
    let origin = Point(0, 0, 0);
}
```
å…ƒç»„ç»“æ„ä½“é—´çš„ç±»å‹æ˜¯ä¸äº’é€šçš„, å³ä½¿å®ƒä»¬æ‹¥æœ‰ç€ç›¸åŒçš„ç±»å‹.
ä¾‹å¦‚, ä¸¤ä¸ªåŒæ—¶ä¸º `(i32, i32, i32)` çš„ç»“æ„ä½“ `A` ä¸ `B` ä¹Ÿä¸èƒ½äº’é€š.
å¦‚æœå°è¯•æŠŠ `A` çš„å‚æ•°ä¼ ç»™ `B` , é‚£ä¹ˆå°†ä¼šæŠ¥é”™.
å…ƒç»„ç»“æ„ä½“ç±»ä¼¼äºå…ƒç»„, å¯ä»¥è¢«è§£æ„, ä¹Ÿå¯ä»¥é€šè¿‡ç´¢å¼•å•ç‹¬è®¿é—®.

#### 3.1.4 ç±»å•å…ƒç»“æ„ä½“

**ç±»å•å…ƒç»“æ„ä½“ (unit-like struct)** æ˜¯æ²¡æœ‰ä»»ä½•å­—æ®µçš„ç»“æ„ä½“, ä¹Ÿç§°ä¸ºå•å…ƒç»“æ„ä½“, ä¸å•å…ƒå…ƒç»„ç±»ä¼¼.
æ¯”å¦‚: 
```rust
struct AlwaysEqual; //å®šä¹‰ç±»å•å…ƒç»“æ„ä½“
fn main () {
    let subject = AlwaysEqual;
}
```
---

#### 3.1.5 ç»“æ„ä½“çš„åº”ç”¨

ä½¿ç”¨ç»“æ„ä½“èƒ½å¤Ÿå¤§å¤§å¢åŠ ä»£ç çš„å¯è¯»æ€§.
ä»¥ä¸‹ä»£ç æ˜¯ä¸ä½¿ç”¨ç»“æ„ä½“è®¡ç®—é•¿æ–¹ä½“è¡¨é¢ç§¯ä¸ä½“ç§¯çš„ç¤ºä¾‹:
> é•¿æ–¹ä½“çš„è¡¨é¢ç§¯ $S=2ab+2ac+2bc$.</br>
> é•¿æ–¹ä½“çš„ä½“ç§¯ $V=abc$.</br>
> å…¶ä¸­ $a,b,c$ åˆ†åˆ«ä¸ºé•¿æ–¹ä½“çš„é•¿ã€å®½ã€é«˜.</br>
```rust
//è®¡ç®—é•¿æ–¹ä½“çš„ä½“ç§¯ä¸è¡¨é¢ç§¯
fn volume(a: f64, b: f64, c: f64) -> f64 {
    a * b * c //è®¡ç®—é•¿æ–¹ä½“ä½“ç§¯
} //å®šä¹‰é•¿æ–¹ä½“ä½“ç§¯è®¡ç®—å‡½æ•°

fn superficial_area(a: f64, b: f64, c:f64) -> f64 {
    2f64 * a * b + 2f64 * a * c + 2f64 * b * c //è®¡ç®—é•¿æ–¹ä½“è¡¨é¢ç§¯
} //å®šä¹‰é•¿æ–¹ä½“è¡¨é¢ç§¯è®¡ç®—å‡½æ•°

fn main() {
    //è¾“å…¥æ•°æ®
    let length0 = 3;
    let width0 = 7;
    let height0 = 11;
    //å°†æ•°æ®è½¬æ¢ä¸ºf64
    let length = length0 as f64;
    let width = width0 as f64;
    let height = height0 as f64;
    //è®¡ç®—ä½“ç§¯
    let volume = volume(length, width, height);
    //è®¡ç®—é¢ç§¯
    let superficial_area = superficial_area(length, width, height);
    //è¾“å‡º
    println!("Volume: {}", volume);
    println!("Superficial Area: {}", superficial_area);
}
```
ä½“ç§¯ä¸é¢ç§¯è®¡ç®—å‡½æ•°çš„å‚æ•°è¿‡å¤š, ä½¿å¾—ä»£ç å¯è¯»æ€§å·®.
å¹¶ä¸”, å½“è¾“å…¥çš„æ•°æ®ä¸ºæ•´æ•°æ—¶, å¦‚æœä½¿ç”¨å‡½æ•°, éœ€è¦å¼•å…¥ä¸­é—´å˜é‡ä½¿å…¶å˜ä¸º `f64` æµ®ç‚¹æ•°.
è¿™é‡Œæ”¹ç”¨å…ƒç»„: 
```rust
fn volume(v: (f64, f64, f64)) -> f64 {
    v.0 * v.1 * v.2 //è®¡ç®—é•¿æ–¹ä½“ä½“ç§¯
}

fn superficial_area(s: (f64, f64, f64)) -> f64 {
    2f64 * s.0 * s.1 + 2f64 * s.0 * s.2 + 2f64 * s.1 * s.2 //è®¡ç®—é•¿æ–¹ä½“è¡¨é¢ç§¯
}

fn main() {
    //è¾“å…¥æ•°æ®
    let length = 3;
    let width = 5;
    let height = 19;
    //è½¬æ¢ç±»å‹å¹¶ä¼ å…¥å…ƒç»„
    let rect: (f64, f64, f64) = (length as f64, width as f64, height as f64);
    let volume = volume(rect);
    let superficial_area = superficial_area(rect);
    println!("Volume: {}", volume);
    println!("Superficial Area: {}", superficial_area);
}
```
å½“æˆ‘ä»¬ä½¿ç”¨å…ƒç»„æ—¶, å®¹æ˜“å‘ç°: ä½¿ç”¨å…ƒç»„ç´¢å¼•è€Œéåå­—å¾ˆå®¹æ˜“å°†å„ä¸ªæ•°æ®å¼„æ··.
è¿™æ—¶, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç»“æ„ä½“æ¥è§£å†³è¿™ä¸ªé—®é¢˜:
```rust
struct Rectangle {
    length: f64,
    width: f64,
    height: f64,
} //å®šä¹‰é•¿æ–¹ä½“ç»“æ„ä½“

fn volume(r: &Rectangle) -> f64 {
    r.length * r.width * r.height //è®¡ç®—é•¿æ–¹ä½“ä½“ç§¯
}

fn superficial_area(r: &Rectangle) -> f64 {
    2f64 * r.length * r.width + 2f64 * r.length * r.height + 2f64 * r.width * r.height //è®¡ç®—é•¿æ–¹ä½“è¡¨é¢ç§¯
}

fn main() {
    let length = 4;
    let width = 11;
    let height = 9;
    let rect1 = Rectangle {
        length: length as f64,
        width: width as f64,
        height: height as f64,
    }; //å®ä¾‹åŒ–é•¿æ–¹ä½“ç»“æ„ä½“
    let volume = volume(&rect1);
    let superficial_area = superficial_area(&rect1);
    println!("Volume: {}", volume);
    println!("Superficial Area: {}", superficial_area);
}
```
ä½¿ç”¨ç»“æ„ä½“, ä½¿æˆ‘ä»¬çš„ä»£ç å¯è¯»æ€§å¤§å¤§æé«˜, å¯ä»¥çœå»è®¸å¤šä¸å¿…è¦çš„æ³¨é‡Š.

---
> å‡å¦‚æˆ‘ä»¬éœ€è¦è¿›è¡Œè°ƒè¯•, ç›´æ¥æ‰“å°ç»“æ„ä½“çš„å€¼æ˜¯éå¸¸æ–¹ä¾¿çš„.
> ç„¶è€Œ, åœ¨ä¸€èˆ¬æƒ…å†µä¸‹, è¿™<font color='72E0C2'>**ä¸å¯è¡Œ**</font>.
> å‡å¦‚æˆ‘ä»¬å°è¯•æ‰“å°ç»“æ„ä½“:
> ```rust
> struct Rectangle {
>     width: u32,
>     height: u32,
> }
> fn main() {
>     let rect1 = Rectangle {
>         width: 30,
>         height: 50,
>     };
>     println!("rect1 is {}", rect1);
> }
> ```
> äºæ˜¯, ä»£ç æŠ¥é”™:
> ```terminaloutput
> error[E0277]: `Rectangle` doesn't implement `std::fmt::Display`
>   --> src\main.rs:11:29
>    |
> 11 |     println!("rect1 is {}", rect1);
>    |                             ^^^^^ `Rectangle` cannot be formatted with the default formatter
>    |
>    = help: the trait `std::fmt::Display` is not implemented for `Rectangle`
>    = note: in format strings you may be able to use `{:?}` (or {:#?} for pretty-print) instead
>    = note: this error originates in the macro `$crate::format_args_nl` which comes from the expansion of the macro `println` (in Nightly builds, run with -Z macro-backtrace for more info)
> ```
> - `error[E0277]` å‘Šè¯‰æˆ‘ä»¬, `Rectangle` æ²¡æœ‰å®ç° `std::fmt::Display` trait.
> - ä¸è¿‡, å®ƒæç¤ºæˆ‘ä»¬, å¯ä»¥ä½¿ç”¨ `{:?}` æ¥æ‰“å°.
> ```rust
> struct Rectangle {
>     width: u32,
>     height: u32,
> }
> fn main() {
>     let rect1 = Rectangle {
>         width: 30,
>         height: 50,
>     };
>     println!("rect1 is {:?}", rect1);
> }
> ```
> ä¿®æ”¹åå†è¯•ä¸€æ¬¡, ä¸è¿‡ä»ç„¶æ— æµäºäº‹...å—?
> ```terminaloutput
> error[E0277]: `Rectangle` doesn't implement `Debug`
>   --> src\main.rs:11:31
>    |
> 11 |     println!("rect1 is {:?}", rect1);
>    |                               ^^^^^ `Rectangle` cannot be formatted using `{:?}`
>    |
>    = help: the trait `Debug` is not implemented for `Rectangle`
>    = note: add `#[derive(Debug)]` to `Rectangle` or manually `impl Debug for Rectangle`
>    = note: this error originates in the macro `$crate::format_args_nl` which comes from the expansion of the macro `println` (in Nightly builds, run with -Z macro-backtrace for more info)
>    help: consider annotating `Rectangle` with `#[derive(Debug)]`
>    |
> 2  + #[derive(Debug)]
> 3  | struct Rectangle {
>    |
> ```
> å°½ç®¡è¿˜æ˜¯æŠ¥é”™, ä½†ä¿¡æ¯æœ‰æ‰€å˜åŒ–.
> - ç¼–è¯‘å™¨æç¤ºæˆ‘ä»¬, å¯ä»¥æ·»åŠ  `#[derive(Debug)]` æ¥è§£å†³.
> å†æ¥ä¸€æ¬¡:
> ```rust
> #[derive(Debug)]
> struct Rectangle {
>     width: u32,
>     height: u32,
> }
> fn main() {
>     let rect1 = Rectangle {
>         width: 30,
>         height: 50,
>     };
>     println!("rect1 is {:?}", rect1);
> }
> ```
> è¿™ä¸€æ¬¡, ä»£ç æˆåŠŸè¿è¡Œäº†!